import{l as N,a as $}from"./codis-bd9c62cb.js";import{d as L,a as f,r as k,q as M,b as t,o as v,c as x,g as d,e,w as l,F as q,k as z,l as D,f as m,t as T,E as u,p as W,i as j,_ as A}from"./index-94e23d1f.js";import"./index-1d9b39de.js";const G=i=>(W("data-v-a8b846c9"),i=i(),j(),i),H={class:"content"},J=G(()=>d("span",null,"自建codis集群",-1)),K=["src"],O={class:"dialog-footer"},P=L({__name:"Index",setup(i){const g=f([]),r=f(""),c=f(!1),b="100px",s=k({curl:"",cname:""});k({curl:"",cname:""});const w=async()=>{let n=(await N()).data;n.errorCode===0?g.value=n.data.lists:u.error(n.msg)},h=async()=>{if(console.log(s),!s.curl)u.error("未获取到的新增codis平台地址");else if(!s.cname)u.error("未获取到的新增codis平台名称");else{const n=await $(s);n.data.errorCode===0?(u.success("添加成功"),await w()):u.error(n.data.msg),c.value=!1}};return M(async()=>{await w()}),(n,o)=>{const _=t("el-col"),I=t("el-option"),B=t("el-select"),S=t("el-link"),p=t("el-button"),U=t("el-row"),C=t("el-card"),V=t("el-input"),y=t("el-form-item"),E=t("el-form"),F=t("el-dialog");return v(),x("div",H,[d("div",null,[e(C,{shadow:"never"},{default:l(()=>[e(U,null,{default:l(()=>[e(_,{span:3},{default:l(()=>[J]),_:1}),e(_,{span:2},{default:l(()=>[e(B,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=a=>r.value=a),placeholder:"请选择平台地址"},{default:l(()=>[(v(!0),x(q,null,z(g.value,a=>(v(),D(I,{key:a.Cname,label:a.Cname,value:a.Curl},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{offset:1,span:10},{default:l(()=>[e(S,{href:r.value,target:"_blank",type:"success"},{default:l(()=>[m(T(r.value),1)]),_:1},8,["href"])]),_:1}),e(_,{offset:5,span:3,style:{"min-width":"120px"}},{default:l(()=>[e(p,{size:"small",type:"primary",onClick:o[1]||(o[1]=a=>c.value=!0)},{default:l(()=>[m("添加codis平台")]),_:1})]),_:1})]),_:1})]),_:1})]),d("div",null,[e(C,{shadow:"never"},{default:l(()=>[d("iframe",{src:r.value,frameborder:"0",width:"100%",height:"100%",class:"codis_dashboard"},null,8,K)]),_:1})]),d("div",null,[e(F,{modelValue:c.value,"onUpdate:modelValue":o[6]||(o[6]=a=>c.value=a),title:"新增codis平台地址",width:"30%","align-center":""},{footer:l(()=>[d("span",O,[e(p,{onClick:o[4]||(o[4]=a=>c.value=!1)},{default:l(()=>[m("取消")]),_:1}),e(p,{type:"primary",onClick:o[5]||(o[5]=a=>h())},{default:l(()=>[m("Confirm")]),_:1})])]),default:l(()=>[e(E,{model:s},{default:l(()=>[e(y,{label:"平台名称","label-width":b},{default:l(()=>[e(V,{modelValue:s.cname,"onUpdate:modelValue":o[2]||(o[2]=a=>s.cname=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(y,{label:"平台地址","label-width":b},{default:l(()=>[e(V,{modelValue:s.curl,"onUpdate:modelValue":o[3]||(o[3]=a=>s.curl=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])])}}});const Y=A(P,[["__scopeId","data-v-a8b846c9"]]);export{Y as default};
